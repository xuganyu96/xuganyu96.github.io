---
permalink: /rewrite.html
layout: default
---

<p>It has been</p>
<h1 id="num-days-since">0 days</h1>
<p>since Bruce last rewrote his <a href="https://github.com/xuganyu96/xuganyu96.github.io/blob/main/neovim/init.lua">Vim config</a></p>
<p>
  <strong>Latest commit: </strong>
  <a id="latest-commit-anchor" href="#" style="font-family: 'Courier New', Courier, monospace;">
    xxxxxxx
  </a></br>
  <span id="latest-commit-msg" style="font-family: 'Courier New', Courier, monospace;"></span>
</p>

<footer>
  <small style="color: lightgrey;">Crafted by Bruce with help from ChatGPT</small>
</footer>

<script>
  console.log("Hello, world");

  const url = "https://api.github.com/repos/xuganyu96/xuganyu96.github.io/commits?path=neovim/init.lua&per_page=1";
  fetch(url, {
      method: 'GET',
      headers: {
          'Accept': 'application/vnd.github+json',
          'X-GitHub-Api-Version': '2022-11-28'
      }
  })
  .then(response => {
      if (!response.ok) {
          throw new Error('Network response was not ok: ' + response.statusText);
      }
      return response.json();
  })
  .then(data => {
    const givenDate = new Date(data[0].commit.author.date);
    const currentDate = new Date();
    givenDate.setHours(0, 0, 0, 0);
    currentDate.setHours(0, 0, 0, 0);
    console.log(givenDate);
    console.log(currentDate);
    const timeDeltaMs = currentDate - givenDate;
    const millisecondsInADay = 1000 * 60 * 60 * 24;
    const daysSince = Math.floor(timeDeltaMs / millisecondsInADay);
    const dayOrDays = daysSince > 1 ? 'days' : 'day';

    const daysElement = document.getElementById('num-days-since');
    if (daysElement) {
      daysElement.innerText = `${daysSince} ${dayOrDays}`;
    } else {
      console.error('Element with id "num-days-since" not found.');
    }

    const commitAnchor = document.getElementById("latest-commit-anchor");
    if (commitAnchor) {
      commitAnchor.href = data[0].commit.url;
      commitAnchor.innerText = `${data[0].sha}`;
    } else {
      console.error("Element with id latest-commit-anchor not found.");
    }

    const commitMsg = document.getElementById("latest-commit-msg");
    if (commitMsg) {
      commitMsg.innerText = data[0].commit.message;
    } else {
      console.error("Element with id latest-commit-msg not found.");
    }
  })
  .catch(error => {
      console.error('There was a problem with the fetch operation:', error);
  });
</script>

